<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Reset Password</title>
  <link rel="stylesheet" href="../public/app.css">
</head>

<body>
  <h1>Reset Password</h1>
  <form onsubmit="verify()" class="" action="index.html" method="post">
    <input type="password" id="newpass1" placeholder="New Password" />
    <input type="password" id="newpass2" placeholder="Confirm New Password" />
    <input type="submit" name="" value="Submit"/>
  </form>
  <script type="text/javascript">
  function verify() {
    var passOne = document
      .getElementById('newpass1')
      .value;
    var passTwo = document
      .getElementById('newpass2')
      .value;
    if (passOne !== passTwo) {
      throw new Error('Passwords do not match');
    }
    var xmlHTTP = new XMLHttpRequest();
    xmlHTTP.open('PATCH', '/users/password', true);
    var id = window
      .location
      .pathname
      .split('/')
      .reverse()[0];
    xmlHTTP.setRequestHeader('Content-type', 'application/json');
    xmlHTTP.send(JSON.stringify({id: id, password: passOne}));
    xmlHTTP.onload = function () {
      console.log(xmlHTTP.responseText);
    };
  }
  </script>
</body>

</html>
